# ML-CI-CD: Machine Learning CI/CD Pipeline

This repository demonstrates a comprehensive Continuous Integration and Continuous Deployment (CI/CD) pipeline for a machine learning application. The pipeline automates code quality checks, testing, Docker image building, security scanning, and deployment to AWS Elastic Container Service (ECS).

## üîß Pipeline Overview

The pipeline is defined in the `Jenkinsfile` and includes the following stages:

### 1. Checkout

- **Purpose:** Fetches the latest code from the `main` branch of the GitHub repository.

### 2. Lint Code

- **Tools Used:** `pylint`, `flake8`, `black`

- **Purpose:** Performs static code analysis and formatting checks to ensure code quality and adherence to style guidelines.

### 3. Test Code

- **Tool Used:** `pytest`

- **Purpose:** Executes unit tests located in the `tests/` directory to validate the functionality of the application.

### 4. Trivy Image Scan

- **Tool Used:** [Trivy](https://github.com/aquasecurity/trivy)

- **Purpose:** Scans the application's file system for vulnerabilities and generates a report (`trivy-fs-report.html`).

### 5. Build Docker Image

- **Tool Used:** Docker

- **Purpose:** Builds a Docker image tagged as `latest` using the `Dockerfile` present in the repository.

### 6. Scan Docker Image with Trivy

- **Tool Used:** [Trivy](https://github.com/aquasecurity/trivy)

- **Purpose:** Scans the built Docker image for vulnerabilities and generates a report (`trivy-image-report.html`).

### 7. Push Docker Image

- **Tool Used:** Docker

- **Purpose:** Pushes the tagged Docker image to Docker Hub using the provided credentials.

### 8. Deploy to AWS ECS

- **Tool Used:** AWS CLI

- **Purpose:** Deploys the updated Docker image to an AWS ECS cluster by updating the specified service to force a new deployment.

## ‚öôÔ∏è Prerequisites

Before running the pipeline, ensure the following:

- **Jenkins Setup:**
  - Jenkins is installed and running.
  - Required plugins are installed: `Docker Pipeline`, `Git`, `AWS CLI`, etc.

- **Environment Variables:**
  - `DOCKERHUB_CREDENTIAL_ID`: Credentials ID for Docker Hub authentication.
  - `DOCKERHUB_REGISTRY`: Docker Hub registry URL.
  - `DOCKERHUB_REPOSITORY`: Docker repository name.

- **AWS Setup:**
  - AWS CLI is configured with appropriate credentials and region.
  - ECS cluster and service are set up.

## üöÄ Getting Started

1. **Clone the Repository:**

   ```bash
   git clone https://github.com/Abeshith/ML-CI-CD.git
   cd ML-CI-CD
2. **Configure Jenkins:**

- Create a new pipeline job in Jenkins.
- Set the pipeline script to the Jenkinsfile in the repository.

3. **Run the Pipeline:**

- Trigger the pipeline manually or set up a webhook to trigger on code changes.

## üìÑ Reports

### Linting Reports:
- `pylint-report.txt`: Generated by pylint during the Lint Code stage.
- `flake8-report.txt`: Generated by flake8 during the Lint Code stage.

### Security Scan Reports:
- `trivy-fs-report.html`: File system vulnerability scan report.
- `trivy-image-report.html`: Docker image vulnerability scan report.

## üì¶ Docker Image

The Docker image built in the pipeline is tagged as `latest` and pushed to the specified Docker Hub repository. Ensure that the repository exists and the credentials are correctly configured in Jenkins.

## ‚òÅÔ∏è AWS ECS Deployment

The pipeline deploys the Docker image to an AWS ECS cluster. Ensure that:

- The ECS cluster and service are correctly set up.
- The ECS task definition is configured to use the Docker image from Docker Hub.
- The AWS CLI is configured with the necessary permissions to update the ECS service.

## üîó References

- [Trivy GitHub Repository](https://github.com/aquasecurity/trivy)
- [AWS ECS Documentation](https://docs.aws.amazon.com/ecs/latest/developerguide/Welcome.html)
- [Jenkins Pipeline Syntax](https://www.jenkins.io/doc/book/pipeline/syntax/)
